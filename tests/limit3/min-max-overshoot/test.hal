setexact_for_test_suite_only

loadrt sampler cfg=ffff depth=3200

loadrt limit3
setp limit3.0.min -50
setp limit3.0.max 50
setp limit3.0.maxv 4000
setp limit3.0.maxa 10000

loadrt siggen
setp siggen.0.amplitude 100

net in <= siggen.0.sine
net in => limit3.0.in
net in => sampler.0.pin.0

net out <= limit3.0.out
net out => sampler.0.pin.1

loadrt ddt names=vel,acc
net out => vel.in
net vel <= vel.out => acc.in => sampler.0.pin.2
net acc <= acc.out
net acc => sampler.0.pin.3


loadrt threads name1=t period1=1000000

addf siggen.0.update t
addf limit3.0 t
addf sampler.0 t
addf vel t
addf acc t

# Trigger signal for debugging with halscope
loadrt timedelay names=trigger
setp trigger.in 1
setp trigger.on-delay 3
net trigger <= trigger.out
addf trigger t

start

loadusr -w halsampler -t -n 800
# Testing with halscope:
# - Comment out prev line, uncomment next line & run `halrun test.hal`
#loadusr -w halscope -i test.halscope
